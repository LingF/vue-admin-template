# 权限系统

该权限系统使用了服务端和前端统一开发的管理后台权限管理模版,包含了以下功能:

- 权限管理
- 角色管理
- 账号管理

权限管理API文档_/src/api/README.md_

## 权限管理

一个权限可以对应一个菜单，也可以对应各种元素（非菜单）

整个系统的权限可以组装成一个树状结构的数据（有多个根节点）

单个权限有以下字段

| 属性 | 说明 |
| --- | --- |
| 权限名称 | 当权限对应菜单时，该字段表示显示菜单的文案；非菜单时，只是一个普通的文案标识 |
| code | 当权限对应菜单时，该字段表示路由地址（浏览器访问的路径）；非菜单时，用来标识不同的权限；同一个节点中如果有多个子权限，他们的 `code` 值不能重复 |
| 跳转页面 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 当权限对应菜单，且有具体指向的页面时，该字段表示具体页面的`key`, 即 `/src/router/index.js` 文件里 `asyncPageMap` 中的 `key`；如果该权限是一个父菜单，没有对应页面，则不需要填 |
| 接口配置 | 用于管理接口的权限，由服务端同学配置 |
| 专属角色 | 该字段表示只有选中的角色才可以拥有该权限；如果该字段为空，则所有角色都可以拥有该权限 |
| 状态 | 生效、失效；状态为失效时，相当于所有人都失去了该权限 |
| 描述 | 对该权限的具体描述文案，可不填 |

## 角色管理

根据需求，选择角色所需的权限

## 账号管理

一个账号可以对应多个角色

## 如何新增一个页面？

1. `/src/router/index.js`文件里`asyncPageMap`新增一个页面
2. 在 账户管理-权限管理 中新建相应的权限
3. 在 账户管理-角色管理 中为角色添加相应的权限
4. 用该角色登录后即可看到新的页面（菜单）

## 如何控制页面的元素?

1. 在 账户管理-权限管理 中找到对应页面的权限，新增`子权限`
2. 在页面中用 `this.hasPagePermission('{{权限的code}}')` 来判断是否拥有该权限

> ⚠️ 每当有需求新增了权限，发布到线上的时候，也需在线上环境配置相关权限，并给相关角色新增该权限
